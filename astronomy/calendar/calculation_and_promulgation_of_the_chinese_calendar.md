# 《农历的编算和颁行》分析笔记

本文在分析[《农历的编算和颁行》][1]时，同时也结合[国家标准《农历的编算和颁行》解读材料][4] 一起分析。

## 标准制定背景

- 农历编算的依据
  - 农历编算的依据是太阳和月球的预报位置以及一定的日期编排规则
  - 因此日月位置预报精度的差异和日期编排规则的不同都会直接影响农历日期的编排结果

## 标准主要内容

- 标准主要技术内容
  - 编算部分：规定了农历的编排规则、计算模型和精度以及农历的表示方法。
  - 颁行部分：规定了农历的颁行要求。

### 术语和定义

- 天球 celestial sphere
  - 天文学中引进的以选定点为中心，以任意长为半径的假想球面，用以标记和度量天体的位置和运动。

- 黄极 ecliptic pole
  - 过天球中心与质心天球参考系中地月质心的平均轨道角动量向量平行的直线与天球的交点。

- 黄道 ecliptic
  - 天球上以黄极为极的大圆。

> 备注：太阳在天球上的运动轨迹是一个大圆，称为黄道，黄道其实是地球公转轨道投射在天球上的大圆。

- 黄经圈 longitude circle
  - 天球上过黄极的任意大圆。

- 真天极 true pole
  - 国际天文学联合会岁差章动模型中计算岁差章动的参考极，也称天球中间极。

- 真赤道 true equator
  - 天球上以真天极为极的大圆。

- 真春分点 true equinox
  - 黄道对真赤道的升交点。

- 地心视黄经 apparent geocentric ecliptic longitude
  - 自真春分点起沿黄道向东度量到过地心天球上一点的黄经圈的角距离，其中地心天球是以地心为中心的天球。

- 朔 new moon
  - 月球和太阳的地心视黄经相等的时刻。

- 望 full moon
  - 月球和太阳的地心视黄经相差180°的时刻。

- 朔望月 synodic month
  - 月球连续两次朔的时间间隔。该时间间隔内，月相经历一个由朔到朔的完整的演变周期。

- 回归年 tropical year
  - 太阳视黄经变化360°的时间间隔。该时间间隔内，地球上经历一个完整的季节变换周期。

- 二十四节气 twenty-four solar terms
  - 一个回归年内24个太阳地心视黄经等于15°的整数倍的时刻的总称。每个时刻叫做一个节气。

> 备注：可以设想二十四节气是地球通过其公转轨道二十四个点的时刻。

- 中气 principle term
  - 从冬至开始的二十四节气中逢奇序数的节气，即：冬至、大寒、雨水、春分、谷雨、小满、夏至、大暑、处暑、秋分、霜降、小雪。
  - 中气在农历编算中有确定月序以及安排闰月的重要作用。

- 农历 Chinese Calendar
  - 现行的中国传统历法，又称“夏历”。
  - 农历是一种阴阳历，依据太阳和月球位置的精确预报以及约定的日期编排规则来编排日期，并以传统命名方法来表述日期。

- 北京时间 Beijing Standard Time
  - 中国采用的标准时间，即东经120°标准时。

- 农历日 Chinese calendar day
  - 从北京时间0时起计量到北京时间24时截止的时间间隔。

- 朔日 new moon day
  - 包含朔在内的农历日。

- 农历月 Chinese calendar month
  - 根据农历编排规则确定的包含29个或30个农历日的时间间隔。朔日为农历月的第一个农历日。

- 农历闰月 Chinese calendar intercalary month
  - 根据农历置闰规则确定的某一个不包含中气的农历月。

- 农历年 Chinese calendar year
  - 根据农历编排规则确定的包含12个或13个农历月的时间间隔。
  - 冬至所在的农历月之后第2个（不计闰月）农历月为农历年的第一个农历月。

- 正月 the first month of Chinese calendar
  - 农历年的第一个农历月。

- 农历平年 Chinese calendar common year
  - 不包含闰月的农历年。一个农历平年包含12个农历月。

- 农历闰年 Chinese calendar leap year
  - 包含闰月的农历年。一个农历闰年包含13个农历月。

- 农历日期 Chinese calendar date
  - 由农历年、农历月、农历日组合而成的对特定农历日的标识。

- 天干 celestial stem
  - 中国古代的一种文字记序符号，共10个字：甲、乙、丙、丁、戊、己、庚、辛、壬、癸，循环使用。

- 地支 terrestrial branch
  - 中国古代的一种文字记序符号，共12个字：子、丑、寅、卯、辰、巳、午、未、申、酉、戌、亥，循环使用。

- 生肖 Chinese zodiac
  - 与12地支一一对应的12种动物名称：鼠、牛、虎、兔、龙、蛇、马、羊、猴、鸡、狗、猪，通常用于纪年。

- 六十干支周 sexagesimal cycle
  - 中国古代把天干和地支各循序取一字相配成一对干支，形成由甲子、乙丑……癸亥共六十对干支组成的新的计序符号系统，循环使用，通常用于纪年和纪日。

### 农历的编排规则

- 阴阳历：中国传统历法主流
  - 以朔望月定历月
  - 以回归年定年长
  - 通过设置闰月解决朔望月和回归年之间的不通约问题

- 本标准沿用规则
  - 以北京时间为标准时间
  - 朔日为农历月的第一个农历日
  - 包含节气冬至在内的农历月为农历十一月
  - 若从某个农历十一月开始到下一个农历十一月（不含）之间有 13 个农历月，则需要**置闰**。置闰规则为：取其中最先出现的一个不包含中气的农历月为农历闰月。
  - 农历十一月之后第 2 个（不计闰月）农历月为农历年的起始月

### 农历的计算模型和精度

- 朔和节气
  - 农历日期编排所依据的朔和节气时刻的计算依赖于太阳和月球位置。
  - 太阳和月球的位置按国际地球自转和参考系服务规范所规定的模型计算。
  - 朔和节气的北京时间计算精度应达到 1 s，不计及编算时尚未正式发布的闰秒。

- 闰秒
  - 北京时间属于协调世界时，协调世界时以原子时为基准，但通过闰秒的方式与世界时时刻的偏差不超过 0.9 秒，
  - 闰秒由国际地球自转和参考系服务机构根据对世界时的监测来确定发布，可能在年底或年中或季末，
  - 考虑到农历需要提前一年编算发布，因此，计算精度不计及编算时尚未正式发布的闰秒。

> 伍注：以上描述似乎说明「农历无法提前很多年来编算」？

### 农历的表示方法

- 农历年的表示
  - 干支纪年：甲子年、乙丑年......癸亥年
  - 生肖纪年

- 农历月的表示
  - 数序纪法：正月、二月......十二月
  - 闰月采用在其前一个农历月的名称前加「闰」字的方法命名

- 农历日的表示
  - 数序纪法：初一、初二......初十，十一、十二......二十，二十一、二十二......三十
  - 干支纪法：甲子日、乙丑日......癸亥日

- 日期的表示
  - 组合表示：“农历”、农历年名称、农历月名称、农历日名称
  - 为了明确农历日期所在的农历年的干支周，可在农历日期前标注该农历年年首所在的公历年份

## 疑问

- 现在能否制定未来一千年的农历？
- 天干、地支

## 附录

### 附录A

二十四节气：

- 立春、雨水、惊蛰、春分、清明、谷雨
- 立夏、小满、芒种、夏至、小暑、大暑
- 立秋、处暑、白露、秋分、寒露、霜降
- 立冬、小雪、大雪、冬至、小寒、大寒

传统二十四节气歌：

```text
春雨惊春清谷天，夏满芒夏暑相连。
秋处露秋寒霜降，冬雪雪冬小大寒。
每月两节不变更，最多相差一两天。
上半年来六廿一，下半年是八廿三。
```

七言节气歌:

```text
地球绕着太阳转，绕完一圈是一年。
一年分成十二月，二十四节紧相连。
按照公历来推算，每月两气不改变。
上半年是六、廿一，下半年逢八、廿三。
这些就是交节日，有差不过一两天。
二十四节有先后，下列口诀记心间：
一月小寒接大寒，二月立春雨水连；
惊蛰春分在三月，清明谷雨四月天；
五月立夏和小满，六月芒种夏至连；
七月大暑和小暑，立秋处暑八月间；
九月白露接秋分，寒露霜降十月全；
立冬小雪十一月，大雪冬至迎新年。
抓紧季节忙生产，种收及时保丰年。
```

### 附录B

- 龙头节：农历二月初二
- 上巳节：农历三月初三
- 中元节：农历七月十五
- 腊八节：农历十二月初八

- 清明节：包含节气清明在内的农历日
- 冬至节：包含节气冬至在内的农历日
- 除夕：农历年的最后一个农历日

> 备注：清明节、冬至节和除夕的日期都不是固定的

### 天干、地支

- 天干：甲、乙、丙、丁、戊、己、庚、辛、壬、癸
- 地支：子、丑、寅、卯、辰、巳、午、未、申、酉、戌、亥
- 十二时辰：子时为23点到1点，亥时为21点到23点。规律：第 i 个地支对应小时为`[2*i-1, 2*i+1)]`

> 备注：
> 1. 寅：yin，人；卯：mao，牡；巳：si，字；酉：you，有；戌：xu，摔；癸：gui，桂；壬：ren，吟；戊：wu，冒
> 2. 记忆天干：无论是甲乙丙丁，都务（戊）必自（己）力更（庚）生（辛），因为人（壬）贵（癸）有自知之明
> 3. 记忆地支：子丑寅卯，城（辰）市（巳）人睡到中（午）还（未）够，身（申）体犹（酉）出虚（戌）汗（亥）

### 二十四节气

- 正午日影最长的一日称为冬至。

- 地球的自转轴并不与其公转轨道垂直，这就是季节的成因，也是正午时日影长度变化的原因。

## 参考资料

- [在线预览：农历的编算和颁行][1]
- [农历的编算和颁行][2]
- [农历的编算和颁行（修订稿）][3]
- [国家标准《农历的编算和颁行》解读材料][4]
- [历书科普问题解答][5]
- [农历编算法则][6]
- [The Mathematics of the Chinese Calendar][7]

  [1]: http://c.gb688.cn/bzgk/gb/showGb?type=online&hcno=E107EA4DE9725EDF819F33C60A44B296
  [2]: https://interesting-sky.china-vo.org/wp-content/uploads/2020/12/GB-T-33661-2017-%E5%86%9C%E5%8E%86%E7%9A%84%E7%BC%96%E7%AE%97%E5%92%8C%E9%A2%81%E8%A1%8C.pdf
  [3]: http://www.nongli.net/cn/11028.html
  [4]: http://www.pmo.cas.cn/xwdt2019/kpdt2019/202203/W020220415615893869050.pdf
  [5]: http://www.pmo.cas.cn/xwdt2019/kpdt2019/202203/t20220317_6399980.html
  [6]: https://ytliu0.github.io/ChineseCalendar/rules_simp.html
  [7]: https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.139.9311&rep=rep1&type=pdf
